#!/bin/bash
# List available haltech-mock scenarios
#
# Usage: ./scripts/list-scenarios

MOCK="/opt/haltech-venv/bin/haltech-mock"

if [ ! -x "$MOCK" ]; then
    echo "Error: haltech-mock not found at $MOCK"
    echo "Please install haltech-mock: pip install haltech-mock"
    exit 1
fi

echo "═══════════════════════════════════════════════════════════════════════"
echo "  Haltech ECU Scenarios"
echo "═══════════════════════════════════════════════════════════════════════"
echo ""
echo "idle          - Engine idling with realistic RPM and temperature variations (30s)"
echo "accel         - Smooth acceleration from low to high RPM (5s)"
echo "warmup        - Cold start with high idle, rich mixture, gradual temperature rise (120s)"
echo "track         - Single track lap with straights, braking zones, and corners (90s)"
echo "track-session - Multi-lap track session (loops until stopped) (90s/lap)"
echo "overheat      - Engine overheating with fan activation and warning lights (30s)"
echo "low-oil       - Oil pressure dropping with warning light activation (20s)"
echo "redline       - Hitting the rev limiter with limiting flags active (15s)"
echo "battery       - Alternator failure with dropping voltage and warning light (20s)"
echo ""
echo "Usage:"
echo "  ./scripts/run-with-mock <scenario> [--loop] [--duration N]"
echo ""
echo "Examples:"
echo "  ./scripts/run-with-mock idle"
echo "  ./scripts/run-with-mock track --loop"
echo "  ./scripts/run-with-mock overheat --duration 120"
echo ""
echo "═══════════════════════════════════════════════════════════════════════"
echo "  PD16 Power Distribution Module Scenarios"
echo "═══════════════════════════════════════════════════════════════════════"
echo ""
echo "lights      - Parking, low beam, high beam, turn signals (8A: 0-4)"
echo "cooling     - Temperature-based fan control: 0% → 30% → 80% (25A: 0)"
echo "fuel-pump   - Priming sequence and steady operation (25A: 1)"
echo "fault       - Cycle through fault conditions (overcurrent, short, open) (8A: 5)"
echo "startup     - Boot sequence with output self-test (Multiple)"
echo ""
echo "Usage:"
echo "  ./scripts/run-with-pd16 <scenario> [--device A|B|C|D]"
echo ""
echo "Examples:"
echo "  ./scripts/run-with-pd16 lights"
echo "  ./scripts/run-with-pd16 cooling --device B"
echo ""
echo "═══════════════════════════════════════════════════════════════════════"
echo ""
echo "To see all available channels:"
echo "  $MOCK channels"
echo ""
echo "To see all CAN frames:"
echo "  $MOCK frames"
