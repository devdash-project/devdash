{
    "name": "devdash",
    "build": {
        "dockerfile": "Dockerfile"
    },
    "runArgs": [
        "--privileged",
        "--cap-add=NET_ADMIN",
        "--cap-add=SYS_PTRACE",
        "--security-opt=seccomp=unconfined",
        "--network=host",
        "--hostname=devdash"
    ],
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind",
        "source=devdash-claude-config,target=/home/ubuntu/.claude,type=volume",
        "source=devdash-gh-config,target=/home/ubuntu/.config/gh,type=volume",
        "source=${localEnv:HOME}/.secrets/claude_token,target=/run/secrets/claude_token,type=bind,readonly",
        "source=${localEnv:HOME}/Library/Containers/cc.ffitch.shottr/Data/tmp/cc.ffitch.shottr,target=/mnt/screenshots,type=bind",
        "source=${localEnv:HOME}/Projects,target=/mnt/projects,type=bind"
    ],
    "forwardPorts": [
        6080
    ],
    "otherPortsAttributes": {
        "onAutoForward": "silent"
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "llvm-vs-code-extensions.vscode-clangd",
                "vadimcn.vscode-lldb",
                "ms-vscode.cmake-tools",
                "theqtcompany.qt",
                "theqtcompany.qt-core",
                "theqtcompany.qt-cpp",
                "theqtcompany.qt-qml",
                "theqtcompany.qt-ui",
                "cschlosser.doxdocgen",
                "eamodio.gitlens",
                "editorconfig.editorconfig",
                "usernamehw.errorlens",
                "gruntfuggly.todo-tree",
                "ajshort.include-autocomplete"
            ],
            "settings": {
                "cmake.configureOnOpen": true,
                "cmake.generator": "Ninja",
                "clangd.arguments": [
                    "--background-index",
                    "--clang-tidy",
                    "--header-insertion=iwyu",
                    "--completion-style=detailed"
                ],
                "C_Cpp.intelliSenseEngine": "disabled",
                "editor.formatOnSave": true,
                "[cpp]": {
                    "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd"
                },
                "[qml]": {
                    "editor.defaultFormatter": "theqtcompany.qt-qml",
                    "editor.formatOnSave": true
                },
                "[cmake]": {
                    "editor.formatOnSave": true
                },
                "errorLens.enabledDiagnosticLevels": [
                    "error",
                    "warning"
                ],
                "todo-tree.general.tags": [
                    "TODO",
                    "FIXME",
                    "BUG",
                    "HACK",
                    "XXX"
                ]
            }
        }
    },
    "postCreateCommand": "echo '{\"hasCompletedOnboarding\": true}' > /home/ubuntu/.claude.json && echo 'export CLAUDE_CODE_OAUTH_TOKEN=$(cat /run/secrets/claude_token 2>/dev/null)' >> /home/ubuntu/.bashrc && sudo chown -R $(id -u):$(id -g) /home/ubuntu/.claude /home/ubuntu/.config/gh 2>/dev/null || (mkdir -p /home/ubuntu/.claude /home/ubuntu/.config/gh) && bash .devcontainer/setup-vcan.sh && bash .devcontainer/start-display.sh",
    "remoteUser": "ubuntu"
}